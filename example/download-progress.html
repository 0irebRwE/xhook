
<h5>progress events</h5>
<pre id="events"></pre>

<!-- <script src="../dist/1/xhook.js"></script> -->
<script type="text/javascript">

//hook
// xhook.before(function(request) {
//   console.log('hook!', request.url);
// });

function append(str) {
  document.getElementById('events').innerHTML += str + "\n";
}

var xhr = new XMLHttpRequest();

xhr.open('GET', 'http://placekitten.com/2000/2000?r='+Math.random());

xhr.onreadystatechange = function(e) {

  append('readyState '+ xhr.readyState)
  console.log(e)

  // if(xhr.readyState !== 4) return;

  // append('done! ' + xhr.responseType);

  // var utf8 = unescape(encodeURIComponent(xhr.response));
  // var arr = [];
  // for (var i = 0; i < utf8.length; i++) {
  //   arr.push(utf8.charCodeAt(i));
  // }

  // window.b = new Blob(arr, {type:'image/jpeg'});

}


// xhr.onprogress = function(e) {
//   append(Math.round((e.loaded/e.total)*100));
// }



append('about to send...')
xhr.send();
append('send...')

</script>